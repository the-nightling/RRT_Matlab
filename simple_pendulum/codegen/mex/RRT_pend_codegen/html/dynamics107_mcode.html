<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86">86</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87">87</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S44T10U375">xdot</span> = dynamics(<span class="var type1" id="S45T10U378">x</span>,<span class="var type1" id="S46T1U379">u</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88">88</a></span><span class="line">    <span class="comment">% pendulum parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89">89</a></span><span class="line">    <span class="mxinfo" id="T1:U4"><span class="var type1" id="S47T1U382">m</span> = <span class="mxinfo" id="T1:U6">1</span></span>;      <span class="comment">% mass</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90">90</a></span><span class="line">    <span class="mxinfo" id="T1:U7"><span class="var type1" id="S48T1U386">g</span> = <span class="mxinfo" id="T1:U9">9.8</span></span>;    <span class="comment">% acceleration due to gravity</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91">91</a></span><span class="line">    <span class="mxinfo" id="T1:U10"><span class="var type1" id="S49T1U390">l</span> = <span class="mxinfo" id="T1:U12">1</span></span>;      <span class="comment">% length of pendulum link</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92">92</a></span><span class="line">    <span class="mxinfo" id="T1:U13"><span class="var type1" id="S50T1U394">I</span> = <span class="mxinfo" id="T1:U15"><span class="var type1" id="S47T1U397">m</span>*<span class="var type1" id="S49T1U398">l</span>*<span class="var type1" id="S49T1U399">l</span></span></span>;  <span class="comment">% rotational inertia</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93">93</a></span><span class="line">    <span class="mxinfo" id="T1:U19"><span class="var type1" id="S51T1U402">b</span> = <span class="mxinfo" id="T1:U21">0.1</span></span>;    <span class="comment">% damping factor</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94">94</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95">95</a></span><span class="line">    <span class="comment">% pendulum state space equation</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96">96</a></span><span class="line">    <span class="mxinfo" id="T10:U22"><span class="var type1" id="S44T10U406">xdot</span> = <span class="mxinfo" id="T10:U24">[<span class="mxinfo" id="T1:U25"><span class="var type1" id="S45T10U410">x</span>(<span class="mxinfo" id="T1:U27">2</span>,:)</span>; <span class="mxinfo" id="T1:U28">(<span class="mxinfo" id="T1:U29"><span class="mxinfo" id="T1:U30"><span class="var type1" id="S46T1U418">u</span>-<span class="mxinfo" id="T1:U32"><span class="mxinfo" id="T1:U33"><span class="var type1" id="S47T1U422">m</span>*<span class="var type1" id="S48T1U423">g</span>*<span class="var type1" id="S49T1U424">l</span></span>*<span class="mxinfo" id="T1:U37">sin(<span class="mxinfo" id="T1:U38">(<span class="mxinfo" id="T1:U39"><span class="mxinfo" id="T1:U40">pi</span>/<span class="mxinfo" id="T1:U41">2</span></span>)-<span class="mxinfo" id="T1:U42"><span class="var type1" id="S45T10U434">x</span>(<span class="mxinfo" id="T1:U44">1</span>,:)</span></span>)</span></span></span>-<span class="mxinfo" id="T1:U45"><span class="mxinfo" id="T1:U46"><span class="var type1" id="S51T1U438">b</span></span>*<span class="mxinfo" id="T1:U48"><span class="var type1" id="S45T10U440">x</span>(<span class="mxinfo" id="T1:U50">2</span>,:)</span></span></span>)./<span class="mxinfo" id="T1:U51"><span class="var type1" id="S50T1U443">I</span></span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97">97</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
